<h1>Edit product</h1>

<%= form_with model: [:admin, @product], local: true do |f| %>
  <% if @product.image.attached? %>
    <div class="mb-3">
      <%= image_tag @product.image.variant(resize_to_limit: [200, 200]),
                    class: "img-thumbnail mb-2",
                    alt: "Primary image of #{@product.name}" %>
      <%= button_to "Remove primary image",
                    purge_image_admin_product_path(@product),
                    method: :delete,
                    class: "btn btn-sm btn-outline-danger",
                    data: { turbo_confirm: "Remove the image?" } %>
    </div>
  <% end %>

  <div class="mb-3">
    <%= f.label :image, "Upload new primary image", class: "form-label" %>
    <%= f.file_field :image, class: "form-control", accept: "image/*" %>
  </div>

  <div class="mt-3">
    <%= f.submit "Save Changes", class: "btn btn-primary" %>
    <%= link_to "Cancel", admin_products_path, class: "btn btn-secondary ms-2" %>
  </div>
<% end %>
